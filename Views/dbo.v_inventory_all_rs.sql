SET QUOTED_IDENTIFIER OFF
GO
SET ANSI_NULLS ON
GO
 
CREATE view [dbo].[v_inventory_all_rs]
(
   inv_num,
   trade_num,
   order_num,
   sale_item_num,
   cmdty_code,
   pos_num,
   del_loc_code,
   storage_subloc_name,
   port_num,
   inv_bal_from_date,
   inv_bal_to_date,
   inv_open_prd_proj_qty,
   inv_open_prd_actual_qty,
   inv_adj_qty,
   inv_curr_proj_qty,
   inv_curr_actual_qty,
   inv_qty_uom_code,
   inv_avg_cost,
   inv_cost_curr_code,
   inv_cost_uom_code,
   cmnt_num,
   inv_rcpt_proj_qty,
   inv_rcpt_actual_qty,
   inv_dlvry_proj_qty,
   inv_dlvry_actual_qty,
   open_close_ind,
   long_cmdty_code,
   short_cmdty_code,
   long_risk_mkt,
   short_risk_mkt,
   balance_period,
   line_fill_qty,
   needs_repricing,
   inv_loop_num,
   inv_cnfrmd_qty,
   prev_inv_num,
   next_inv_num,
   inv_type,
   r_inv_avg_cost_amt,
   unr_inv_avg_cost_amt,
   trans_id,
   resp_trans_id,
   inv_open_prd_proj_sec_qty,
   inv_open_prd_actual_sec_qty,
   inv_cnfrmd_sec_qty,
   inv_adj_sec_qty,
   inv_sec_qty_uom_code,
   inv_curr_proj_sec_qty,
   inv_curr_actual_sec_qty,
   inv_rcpt_proj_sec_qty,
   inv_rcpt_actual_sec_qty,
   inv_dlvry_proj_sec_qty,
   inv_dlvry_actual_sec_qty,
   inv_credit_exposure_oid,
   inv_wacog_cost,
   inv_bal_qty,
   inv_bal_sec_qty,
   inv_mac_cost,
   mac_inv_amt,
   inv_mac_insert_cost,
   inv_fifo_cost,
   roll_at_mkt_price_ind,
   inv_target_min_qty,
   inv_target_max_qty,
   inv_capacity,
   inv_min_op_req_qty,
   inv_safe_fill,
   inv_heel,
   inv_fifo_num,	
   fifo_open_qty,	
   fifo_open_qty_uom_code,		
   sec_fifo_open_qty,	
   sec_fifo_open_qty_uom_code,		
   inv_pricing_type,
   use_mtm,  
   trans_type,
   trans_user_init,
   tran_date,
   app_name,
   workstation_id,
   sequence
)
as
select
   maintb.inv_num,
   maintb.trade_num,
   maintb.order_num,
   maintb.sale_item_num,
   maintb.cmdty_code,
   maintb.pos_num,
   maintb.del_loc_code,
   maintb.storage_subloc_name,
   maintb.port_num,
   maintb.inv_bal_from_date,
   maintb.inv_bal_to_date,
   maintb.inv_open_prd_proj_qty,
   maintb.inv_open_prd_actual_qty,
   maintb.inv_adj_qty,
   maintb.inv_curr_proj_qty,
   maintb.inv_curr_actual_qty,
   maintb.inv_qty_uom_code,
   maintb.inv_avg_cost,
   maintb.inv_cost_curr_code,
   maintb.inv_cost_uom_code,
   maintb.cmnt_num,
   maintb.inv_rcpt_proj_qty,
   maintb.inv_rcpt_actual_qty,
   maintb.inv_dlvry_proj_qty,
   maintb.inv_dlvry_actual_qty,
   maintb.open_close_ind,
   maintb.long_cmdty_code,
   maintb.short_cmdty_code,
   maintb.long_risk_mkt,
   maintb.short_risk_mkt,
   maintb.balance_period,
   maintb.line_fill_qty,
   maintb.needs_repricing,
   maintb.inv_loop_num,
   maintb.inv_cnfrmd_qty,
   maintb.prev_inv_num,
   maintb.next_inv_num,
   maintb.inv_type,
   maintb.r_inv_avg_cost_amt,
   maintb.unr_inv_avg_cost_amt,
   maintb.trans_id,
   null,
   maintb.inv_open_prd_proj_sec_qty,
   maintb.inv_open_prd_actual_sec_qty,
   maintb.inv_cnfrmd_sec_qty,
   maintb.inv_adj_sec_qty,
   maintb.inv_sec_qty_uom_code,
   maintb.inv_curr_proj_sec_qty,
   maintb.inv_curr_actual_sec_qty,
   maintb.inv_rcpt_proj_sec_qty,
   maintb.inv_rcpt_actual_sec_qty,
   maintb.inv_dlvry_proj_sec_qty,
   maintb.inv_dlvry_actual_sec_qty,
   maintb.inv_credit_exposure_oid,
   maintb.inv_wacog_cost,
   maintb.inv_bal_qty,
   maintb.inv_bal_sec_qty,
   maintb.inv_mac_cost,
   maintb.mac_inv_amt,
   maintb.inv_mac_insert_cost,
   maintb.inv_fifo_cost,
   maintb.roll_at_mkt_price_ind,
   maintb.inv_target_min_qty,
   maintb.inv_target_max_qty,
   maintb.inv_capacity,
   maintb.inv_min_op_req_qty,
   maintb.inv_safe_fill,
   maintb.inv_heel,
   maintb.inv_fifo_num,	
   maintb.fifo_open_qty,	
   maintb.fifo_open_qty_uom_code,		
   maintb.sec_fifo_open_qty,	
   maintb.sec_fifo_open_qty_uom_code,		
   maintb.inv_pricing_type,
   maintb.use_mtm,  
   it.type,
   it.user_init,
   it.tran_date,
   it.app_name,
   it.workstation_id,
   it.sequence
from dbo.inventory maintb
        left outer join dbo.icts_transaction it
           on maintb.trans_id = it.trans_id
union
select
   audtb.inv_num,
   audtb.trade_num,
   audtb.order_num,
   audtb.sale_item_num,
   audtb.cmdty_code,
   audtb.pos_num,
   audtb.del_loc_code,
   audtb.storage_subloc_name,
   audtb.port_num,
   audtb.inv_bal_from_date,
   audtb.inv_bal_to_date,
   audtb.inv_open_prd_proj_qty,
   audtb.inv_open_prd_actual_qty,
   audtb.inv_adj_qty,
   audtb.inv_curr_proj_qty,
   audtb.inv_curr_actual_qty,
   audtb.inv_qty_uom_code,
   audtb.inv_avg_cost,
   audtb.inv_cost_curr_code,
   audtb.inv_cost_uom_code,
   audtb.cmnt_num,
   audtb.inv_rcpt_proj_qty,
   audtb.inv_rcpt_actual_qty,
   audtb.inv_dlvry_proj_qty,
   audtb.inv_dlvry_actual_qty,
   audtb.open_close_ind,
   audtb.long_cmdty_code,
   audtb.short_cmdty_code,
   audtb.long_risk_mkt,
   audtb.short_risk_mkt,
   audtb.balance_period,
   audtb.line_fill_qty,
   audtb.needs_repricing,
   audtb.inv_loop_num,
   audtb.inv_cnfrmd_qty,
   audtb.prev_inv_num,
   audtb.next_inv_num,
   audtb.inv_type,
   audtb.r_inv_avg_cost_amt,
   audtb.unr_inv_avg_cost_amt,
   audtb.trans_id,
   audtb.resp_trans_id,
   audtb.inv_open_prd_proj_sec_qty,
   audtb.inv_open_prd_actual_sec_qty,
   audtb.inv_cnfrmd_sec_qty,
   audtb.inv_adj_sec_qty,
   audtb.inv_sec_qty_uom_code,
   audtb.inv_curr_proj_sec_qty,
   audtb.inv_curr_actual_sec_qty,
   audtb.inv_rcpt_proj_sec_qty,
   audtb.inv_rcpt_actual_sec_qty,
   audtb.inv_dlvry_proj_sec_qty,
   audtb.inv_dlvry_actual_sec_qty,
   audtb.inv_credit_exposure_oid,
   audtb.inv_wacog_cost,
   audtb.inv_bal_qty,
   audtb.inv_bal_sec_qty,
   audtb.inv_mac_cost,
   audtb.mac_inv_amt,
   audtb.inv_mac_insert_cost,
   audtb.inv_fifo_cost,
   audtb.roll_at_mkt_price_ind,
   audtb.inv_target_min_qty,
   audtb.inv_target_max_qty,
   audtb.inv_capacity,
   audtb.inv_min_op_req_qty,
   audtb.inv_safe_fill,
   audtb.inv_heel,
   audtb.inv_fifo_num,	
   audtb.fifo_open_qty,	
   audtb.fifo_open_qty_uom_code,		
   audtb.sec_fifo_open_qty,	
   audtb.sec_fifo_open_qty_uom_code,		
   audtb.inv_pricing_type,
   audtb.use_mtm,  
   it.type,
   it.user_init,
   it.tran_date,
   it.app_name,
   it.workstation_id,
   it.sequence
from dbo.aud_inventory audtb
        left outer join dbo.icts_transaction it
           on audtb.trans_id = it.trans_id
GO
GRANT SELECT ON  [dbo].[v_inventory_all_rs] TO [admin_group]
GO
GRANT SELECT ON  [dbo].[v_inventory_all_rs] TO [next_usr]
GO
