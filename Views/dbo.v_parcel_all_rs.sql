SET QUOTED_IDENTIFIER OFF
GO
SET ANSI_NULLS ON
GO
 
CREATE view [dbo].[v_parcel_all_rs]
(
   oid,
   type,
   associative_state,
   status,
   reference,
   sch_qty,
   sch_qty_uom_code,
   location_code,
   facility_code,
   tank_code,
   cmdty_code,
   product_code,
   grade,
   quality,
   mot_type_code,
   estimated_date,
   sch_from_date,
   sch_to_date,
   creator_init,
   creation_date,
   last_update_by_init,
   last_update_date,
   forecast_num,
   trade_num,
   order_num,
   item_num,
   inv_num,
   shipment_num,
   alloc_num,
   alloc_item_num,
   trans_id,
   resp_trans_id,
   nomin_qty,
   nomin_qty_uom_code,
   cmnt_num,
   t4_loc,
   t4_consignee,
   t4_tankage,
   gn_taric_code,
   custom_code,
   tariff_code,
   custom_status,
   excise_status,
   transmitall_type,
   inspector,
   latest_feed_name,
   send_to_sap,
   bookco_bank_acct_num,
   trans_type,
   trans_user_init,
   tran_date,
   app_name,
   workstation_id,
   sequence
)
as
select
   maintb.oid,
   maintb.type,
   maintb.associative_state,
   maintb.status,
   maintb.reference,
   maintb.sch_qty,
   maintb.sch_qty_uom_code,
   maintb.location_code,
   maintb.facility_code,
   maintb.tank_code,
   maintb.cmdty_code,
   maintb.product_code,
   maintb.grade,
   maintb.quality,
   maintb.mot_type_code,
   maintb.estimated_date,
   maintb.sch_from_date,
   maintb.sch_to_date,
   maintb.creator_init,
   maintb.creation_date,
   maintb.last_update_by_init,
   maintb.last_update_date,
   maintb.forecast_num,
   maintb.trade_num,
   maintb.order_num,
   maintb.item_num,
   maintb.inv_num,
   maintb.shipment_num,
   maintb.alloc_num,
   maintb.alloc_item_num,
   maintb.trans_id,
   null,
   maintb.nomin_qty,
   maintb.nomin_qty_uom_code,
   maintb.cmnt_num,
   maintb.t4_loc,
   maintb.t4_consignee,
   maintb.t4_tankage,
   maintb.gn_taric_code,
   maintb.custom_code,
   maintb.tariff_code,
   maintb.custom_status,
   maintb.excise_status,
   maintb.transmitall_type,
   maintb.inspector,
   maintb.latest_feed_name,
   maintb.send_to_sap,
   maintb.bookco_bank_acct_num,
   it.type,
   it.user_init,
   it.tran_date,
   it.app_name,
   it.workstation_id,
   it.sequence
from dbo.parcel maintb
        left outer join dbo.icts_transaction it
           on maintb.trans_id = it.trans_id
union
select
   audtb.oid,
   audtb.type,
   audtb.associative_state,
   audtb.status,
   audtb.reference,
   audtb.sch_qty,
   audtb.sch_qty_uom_code,
   audtb.location_code,
   audtb.facility_code,
   audtb.tank_code,
   audtb.cmdty_code,
   audtb.product_code,
   audtb.grade,
   audtb.quality,
   audtb.mot_type_code,
   audtb.estimated_date,
   audtb.sch_from_date,
   audtb.sch_to_date,
   audtb.creator_init,
   audtb.creation_date,
   audtb.last_update_by_init,
   audtb.last_update_date,
   audtb.forecast_num,
   audtb.trade_num,
   audtb.order_num,
   audtb.item_num,
   audtb.inv_num,
   audtb.shipment_num,
   audtb.alloc_num,
   audtb.alloc_item_num,
   audtb.trans_id,
   audtb.resp_trans_id,
   audtb.nomin_qty,
   audtb.nomin_qty_uom_code,
   audtb.cmnt_num,
   audtb.t4_loc,
   audtb.t4_consignee,
   audtb.t4_tankage,
   audtb.gn_taric_code,
   audtb.custom_code,
   audtb.tariff_code,
   audtb.custom_status,
   audtb.excise_status,
   audtb.transmitall_type,
   audtb.inspector,
   audtb.latest_feed_name,
   audtb.send_to_sap,
   audtb.bookco_bank_acct_num,
   it.type,
   it.user_init,
   it.tran_date,
   it.app_name,
   it.workstation_id,
   it.sequence
from dbo.aud_parcel audtb
        left outer join dbo.icts_transaction it
           on audtb.trans_id = it.trans_id
GO
GRANT SELECT ON  [dbo].[v_parcel_all_rs] TO [admin_group]
GO
GRANT SELECT ON  [dbo].[v_parcel_all_rs] TO [next_usr]
GO
EXEC sp_addextendedproperty N'SymphonyProduct', N'OIL', 'SCHEMA', N'dbo', 'VIEW', N'v_parcel_all_rs', NULL, NULL
GO
