SET QUOTED_IDENTIFIER OFF
GO
SET ANSI_NULLS ON
GO

CREATE view [dbo].[cost_search_view]
(
	 cost_account_name,
	 cost_num,
	 cost_code, 				
	 cost_status,			
	 cost_prim_sec_ind,
	 cost_est_final_ind,
	 cost_pay_rec_ind, 		
	 cost_type_code, 		
	 bus_cost_type_num,  	
	 bus_cost_state_num,  	
	 bus_cost_fate_num, 		
	 bus_cost_fate_mod_date,
	 bus_cost_fate_mod_init, 
	 cost_owner_code, 		
	 cost_owner_key1,
	 cost_owner_key2,
	 cost_owner_key3,
	 cost_owner_key4,
	 cost_owner_key5,
	 cost_owner_key6,
	 cost_owner_key7,
	 cost_owner_key8,
	 parent_cost_num, 		
	 port_num,
	 pos_group_num, 			
	 acct_num, 				
	 trade_num,				
	 movement_date,
	 loc_name,				
	 lc_num,					
	 mot_code,				
	 state_code,				
	 cost_qty,
	 cost_qty_uom_code, 		
	 cost_qty_est_actual_ind, 
	 cost_unit_price,
	 cost_price_curr_code, 	
	 cost_price_uom_code, 	
	 cost_price_est_actual_ind,
	 cost_amt,
	 cost_amt_type,
	 cost_vouchered_amt,
	 cost_drawn_bal_amt,
	 pay_method_code, 		
	 pay_term_code, 			
	 cost_pay_days,
	 credit_term_code, 		
	 cost_book_comp_num, 	
	 cost_book_comp_short_name, 
	 cost_book_prd_date,
	 cost_book_curr_code, 	
	 cost_book_exch_rate,
	 cost_xrate_conv_ind,
	 creation_date,
	 creator_init, 			
	 cost_eff_date,
	 cost_due_date,
	 cost_due_date_mod_date,
	 cost_due_date_mod_init,	
	 cost_approval_date,
	 cost_approval_init,		
	 cost_gl_acct_cr_code,
	 cost_gl_acct_dr_code,
	 cost_gl_acct_mod_date,
	 cost_gl_acct_mod_init,	
	 cost_gl_book_type_code,
	 cost_gl_book_date,
	 cost_gl_book_init,		
	 cost_gl_offset_acct_code,
	 cost_short_cmnt,
	 cmnt_num,				
	 cost_accrual_ind,
	 cost_price_mod_date,
	 cost_price_mod_init,	
	 cost_partial_ind,
	 first_accrued_date,
	 cost_composite_source,
	 trader_init,			
	 lease_num,
	 transporter_code,		
	 bol_code,				
	 alloc_num,	       		
	 alloc_item_num,
	 ai_est_actual_date,
   option_exercise_date,
   option_expiration_date,
   ticket_num,
   cost_paid_date,
   cost_credit_ind,
   cost_center_code_debt,
   cost_center_code_credit,
   cost_send_id,
   vc_acct_num,          
   cash_date,        
   user_init,
   tran_date,
   trans_id
)
as
select
	 a.acct_short_name,
	 c.cost_num,
	 c.cost_code,
	 c.cost_status,
	 c.cost_prim_sec_ind,
	 c.cost_est_final_ind,
	 c.cost_pay_rec_ind,
	 c.cost_type_code,
	 c.bus_cost_type_num,
	 c.bus_cost_state_num,
	 c.bus_cost_fate_num,
	 c.bus_cost_fate_mod_date,
	 c.bus_cost_fate_mod_init,
	 c.cost_owner_code,
	 c.cost_owner_key1,
	 c.cost_owner_key2,
	 c.cost_owner_key3,
	 c.cost_owner_key4,
	 c.cost_owner_key5,
	 c.cost_owner_key6,
	 c.cost_owner_key7,
	 c.cost_owner_key8,
	 c.parent_cost_num,
	 c.port_num,
	 c.pos_group_num,
	 c.acct_num,
	 cc.trade_num,
	 cc.movement_date,
	 cc.loc_name,
	 cc.lc_num,
	 cc.mot_code,
	 cc.state_code,
	 c.cost_qty,
	 c.cost_qty_uom_code,
	 c.cost_qty_est_actual_ind,
	 c.cost_unit_price,
	 c.cost_price_curr_code,
	 c.cost_price_uom_code,
	 c.cost_price_est_actual_ind,
	 c.cost_amt,
	 c.cost_amt_type,
	 c.cost_vouchered_amt,
	 c.cost_drawn_bal_amt,
	 c.pay_method_code,
	 c.pay_term_code,
	 c.cost_pay_days,
	 c.credit_term_code,
	 c.cost_book_comp_num,
	 c.cost_book_comp_short_name, 
	 c.cost_book_prd_date,
	 c.cost_book_curr_code,
	 c.cost_book_exch_rate,
	 c.cost_xrate_conv_ind,
	 c.creation_date,
	 c.creator_init,
	 c.cost_eff_date,
	 c.cost_due_date,
	 c.cost_due_date_mod_date,
	 c.cost_due_date_mod_init,
	 c.cost_approval_date,
	 c.cost_approval_init,
	 c.cost_gl_acct_cr_code,
	 c.cost_gl_acct_dr_code,
	 c.cost_gl_acct_mod_date,
	 c.cost_gl_acct_mod_init,
	 c.cost_gl_book_type_code,
	 c.cost_gl_book_date,
	 c.cost_gl_book_init,
	 c.cost_gl_offset_acct_code,
	 c.cost_short_cmnt,
	 c.cmnt_num,
	 c.cost_accrual_ind,
	 c.cost_price_mod_date,
	 c.cost_price_mod_init,
	 c.cost_partial_ind,
	 c.first_accrued_date,
	 cc.cost_composite_source,
	 cc.trader_init,
	 cc.lease_num,
	 cc.transporter_code,
	 cc.bol_code,
	 cc.alloc_num,
	 cc.alloc_item_num,
	 cc.ai_est_actual_date,
   cc.option_exercise_date,
   cc.option_expiration_date,
   cc.ticket_num,
   c.cost_paid_date,
   c.cost_credit_ind,
   c.cost_center_code_debt,
   c.cost_center_code_credit,
   c.cost_send_id,
   c.vc_acct_num,          
   c.cash_date,        
   it.user_init,
   it.tran_date,
   c.trans_id
from dbo.cost c
        inner join dbo.cost_composite cc
           on c.cost_num = cc.cost_num
        inner join dbo.account a
           on c.acct_num = a.acct_num
        left outer join dbo.icts_transaction it
           on c.trans_id = it.trans_id      
GO
GRANT SELECT ON  [dbo].[cost_search_view] TO [admin_group]
GO
GRANT SELECT ON  [dbo].[cost_search_view] TO [next_usr]
GO
