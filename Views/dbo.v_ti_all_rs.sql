SET QUOTED_IDENTIFIER OFF
GO
SET ANSI_NULLS ON
GO
 
CREATE view [dbo].[v_ti_all_rs]
(
   trade_num,
   order_num,
   item_num,
   item_status_code,
   p_s_ind,
   booking_comp_num,
   gtc_code,
   cmdty_code,
   risk_mkt_code,
   title_mkt_code,
   trading_prd,
   contr_qty,
   contr_qty_uom_code,
   contr_qty_periodicity,
   accum_periodicity,
   uom_conv_rate,
   item_type,
   formula_ind,
   total_priced_qty,
   priced_qty_uom_code,
   avg_price,
   price_curr_code,
   price_uom_code,
   idms_bb_ref_num,
   idms_contr_num,
   idms_profit_center,
   idms_acct_alloc,
   cmnt_num,
   brkr_num,
   brkr_cont_num,
   brkr_comm_amt,
   brkr_comm_curr_code,
   brkr_comm_uom_code,
   brkr_ref_num,
   fut_trader_init,
   parent_item_num,
   real_port_num,
   amend_num,
   amend_creation_date,
   amend_effect_start_date,
   amend_effect_end_date,
   summary_item_num,
   pooling_type,
   pooling_port_num,
   pooling_port_ind,
   total_sch_qty,
   sch_qty_uom_code,
   open_qty,
   open_qty_uom_code,
   mtm_pl,
   mtm_pl_curr_code,
   mtm_pl_as_of_date,
   strip_item_status,
   estimate_ind,
   billing_type,
   sched_status,
   hedge_rate,
   hedge_curr_code,
   hedge_multi_div_ind,
   recap_item_num,
   hedge_pos_ind,
   addl_cost_sum,
   contr_mtm_pl,
   max_accum_num,
   formula_declar_date,
   purchasing_group,
   origin_country_code,
   load_port_loc_code,
   disch_port_loc_code,
   excp_addns_code,
   trans_id,
   resp_trans_id,
   internal_parent_trade_num,
   internal_parent_order_num,
   internal_parent_item_num,
   trade_modified_ind,
   item_confirm_ind,
   finance_bank_num,
   agreement_num,
   active_status_ind,
   market_value,
   includes_excise_tax_ind,
   includes_fuel_tax_ind,
   total_committed_qty,
   committed_qty_uom_code,
   is_cleared_ind,
   clr_service_num,
   exch_brkr_num,
   rin_ind,
   is_lc_assigned,
   is_rc_assigned,
   b2b_trade_item,
   use_mkt_formula_for_pl,
   sap_order_num,
   trans_type,
   trans_user_init,
   tran_date,
   app_name,
   workstation_id,
   sequence
)
as
select
   maintb.trade_num,
   maintb.order_num,
   maintb.item_num,
   maintb.item_status_code,
   maintb.p_s_ind,
   maintb.booking_comp_num,
   maintb.gtc_code,
   maintb.cmdty_code,
   maintb.risk_mkt_code,
   maintb.title_mkt_code,
   maintb.trading_prd,
   maintb.contr_qty,
   maintb.contr_qty_uom_code,
   maintb.contr_qty_periodicity,
   maintb.accum_periodicity,
   maintb.uom_conv_rate,
   maintb.item_type,
   maintb.formula_ind,
   maintb.total_priced_qty,
   maintb.priced_qty_uom_code,
   maintb.avg_price,
   maintb.price_curr_code,
   maintb.price_uom_code,
   maintb.idms_bb_ref_num,
   maintb.idms_contr_num,
   maintb.idms_profit_center,
   maintb.idms_acct_alloc,
   maintb.cmnt_num,
   maintb.brkr_num,
   maintb.brkr_cont_num,
   maintb.brkr_comm_amt,
   maintb.brkr_comm_curr_code,
   maintb.brkr_comm_uom_code,
   maintb.brkr_ref_num,
   maintb.fut_trader_init,
   maintb.parent_item_num,
   maintb.real_port_num,
   maintb.amend_num,
   maintb.amend_creation_date,
   maintb.amend_effect_start_date,
   maintb.amend_effect_end_date,
   maintb.summary_item_num,
   maintb.pooling_type,
   maintb.pooling_port_num,
   maintb.pooling_port_ind,
   maintb.total_sch_qty,
   maintb.sch_qty_uom_code,
   maintb.open_qty,
   maintb.open_qty_uom_code,
   maintb.mtm_pl,
   maintb.mtm_pl_curr_code,
   maintb.mtm_pl_as_of_date,
   maintb.strip_item_status,
   maintb.estimate_ind,
   maintb.billing_type,
   maintb.sched_status,
   maintb.hedge_rate,
   maintb.hedge_curr_code,
   maintb.hedge_multi_div_ind,
   maintb.recap_item_num,
   maintb.hedge_pos_ind,
   maintb.addl_cost_sum,
   maintb.contr_mtm_pl,
   maintb.max_accum_num,
   maintb.formula_declar_date,
   maintb.purchasing_group,
   maintb.origin_country_code,
   maintb.load_port_loc_code,
   maintb.disch_port_loc_code,
   maintb.excp_addns_code,
   maintb.trans_id,
   null,
   maintb.internal_parent_trade_num,
   maintb.internal_parent_order_num,
   maintb.internal_parent_item_num,
   maintb.trade_modified_ind,
   maintb.item_confirm_ind,
   maintb.finance_bank_num,
   maintb.agreement_num,
   maintb.active_status_ind,
   maintb.market_value,
   maintb.includes_excise_tax_ind,
   maintb.includes_fuel_tax_ind,
   maintb.total_committed_qty,
   maintb.committed_qty_uom_code,
   maintb.is_cleared_ind,
   maintb.clr_service_num,
   maintb.exch_brkr_num,
   maintb.rin_ind,
   maintb.is_lc_assigned,
   maintb.is_rc_assigned,
   maintb.b2b_trade_item,
   maintb.use_mkt_formula_for_pl,
   maintb.sap_order_num,
   it.type,
   it.user_init,
   it.tran_date,
   it.app_name,
   it.workstation_id,
   it.sequence
from dbo.trade_item maintb
        left outer join dbo.icts_transaction it
           on maintb.trans_id = it.trans_id
union
select
   audtb.trade_num,
   audtb.order_num,
   audtb.item_num,
   audtb.item_status_code,
   audtb.p_s_ind,
   audtb.booking_comp_num,
   audtb.gtc_code,
   audtb.cmdty_code,
   audtb.risk_mkt_code,
   audtb.title_mkt_code,
   audtb.trading_prd,
   audtb.contr_qty,
   audtb.contr_qty_uom_code,
   audtb.contr_qty_periodicity,
   audtb.accum_periodicity,
   audtb.uom_conv_rate,
   audtb.item_type,
   audtb.formula_ind,
   audtb.total_priced_qty,
   audtb.priced_qty_uom_code,
   audtb.avg_price,
   audtb.price_curr_code,
   audtb.price_uom_code,
   audtb.idms_bb_ref_num,
   audtb.idms_contr_num,
   audtb.idms_profit_center,
   audtb.idms_acct_alloc,
   audtb.cmnt_num,
   audtb.brkr_num,
   audtb.brkr_cont_num,
   audtb.brkr_comm_amt,
   audtb.brkr_comm_curr_code,
   audtb.brkr_comm_uom_code,
   audtb.brkr_ref_num,
   audtb.fut_trader_init,
   audtb.parent_item_num,
   audtb.real_port_num,
   audtb.amend_num,
   audtb.amend_creation_date,
   audtb.amend_effect_start_date,
   audtb.amend_effect_end_date,
   audtb.summary_item_num,
   audtb.pooling_type,
   audtb.pooling_port_num,
   audtb.pooling_port_ind,
   audtb.total_sch_qty,
   audtb.sch_qty_uom_code,
   audtb.open_qty,
   audtb.open_qty_uom_code,
   audtb.mtm_pl,
   audtb.mtm_pl_curr_code,
   audtb.mtm_pl_as_of_date,
   audtb.strip_item_status,
   audtb.estimate_ind,
   audtb.billing_type,
   audtb.sched_status,
   audtb.hedge_rate,
   audtb.hedge_curr_code,
   audtb.hedge_multi_div_ind,
   audtb.recap_item_num,
   audtb.hedge_pos_ind,
   audtb.addl_cost_sum,
   audtb.contr_mtm_pl,
   audtb.max_accum_num,
   audtb.formula_declar_date,
   audtb.purchasing_group,
   audtb.origin_country_code,
   audtb.load_port_loc_code,
   audtb.disch_port_loc_code,
   audtb.excp_addns_code,
   audtb.trans_id,
   audtb.resp_trans_id,
   audtb.internal_parent_trade_num,
   audtb.internal_parent_order_num,
   audtb.internal_parent_item_num,
   audtb.trade_modified_ind,
   audtb.item_confirm_ind,
   audtb.finance_bank_num,
   audtb.agreement_num,
   audtb.active_status_ind,
   audtb.market_value,
   audtb.includes_excise_tax_ind,
   audtb.includes_fuel_tax_ind,
   audtb.total_committed_qty,
   audtb.committed_qty_uom_code,
   audtb.is_cleared_ind,
   audtb.clr_service_num,
   audtb.exch_brkr_num,
   audtb.rin_ind,
   audtb.is_lc_assigned,
   audtb.is_rc_assigned,
   audtb.b2b_trade_item,
   audtb.use_mkt_formula_for_pl,
   audtb.sap_order_num,
   it.type,
   it.user_init,
   it.tran_date,
   it.app_name,
   it.workstation_id,
   it.sequence
from dbo.aud_trade_item audtb
        left outer join dbo.icts_transaction it
           on audtb.trans_id = it.trans_id
GO
GRANT SELECT ON  [dbo].[v_ti_all_rs] TO [admin_group]
GO
GRANT SELECT ON  [dbo].[v_ti_all_rs] TO [next_usr]
GO
EXEC sp_addextendedproperty N'SymphonyProduct', N'OIL', 'SCHEMA', N'dbo', 'VIEW', N'v_ti_all_rs', NULL, NULL
GO
